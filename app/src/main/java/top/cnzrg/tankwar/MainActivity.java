package top.cnzrg.tankwar;import android.app.Activity;import android.os.Bundle;import android.util.DisplayMetrics;import android.util.Log;import android.view.View;import top.cnzrg.tankwar.data.GameData;import top.cnzrg.tankwar.fire.OpenFireButtonView;import top.cnzrg.tankwar.rocker.RockerView;import top.cnzrg.tankwar.service.MusicService;import top.cnzrg.tankwar.tank.BotTank;import top.cnzrg.tankwar.tank.Tank;public class MainActivity extends Activity {    private static final String TAG = "MainActivity";    private View iv_tank;    private View iv_tank2;    private OpenFireButtonView openFireView;    private RockerView rockerView1;    private Tank tank;    private BotTank tank2;    private void initScene() {        DisplayMetrics localDisplayMetrics = getResources().getDisplayMetrics();        GameData.screenWidth = localDisplayMetrics.widthPixels;        GameData.screenHeight = localDisplayMetrics.heightPixels;    }    private void initUI() {        iv_tank = findViewById(R.id.iv_tank);        iv_tank2 = findViewById(R.id.iv_tank2);        rockerView1 = findViewById(R.id.rockerView1);        openFireView = findViewById(R.id.ofv);    }    private void initGame() {        tank = new Tank(iv_tank, this);        tank2 = new BotTank(iv_tank2, this);        GameData.addOtherTank(tank2);        Log.e("MainActivity", "Tanks " + GameData.getTanks().size());    }    private void initEvent() {        rockerView1.setRockerChangeListener((x, y) -> {            runOnUiThread(() -> {                tank.move((int) x / 15, (int) y / 15);            });        });        openFireView.setTank(tank);    }    @Override    public void onCreate(Bundle paramBundle) {        super.onCreate(paramBundle);        getWindow().setFlags(1024, 1024);        requestWindowFeature(1);        setContentView(R.layout.activity_main);        initScene();        initUI();        initGame();        initEvent();        GameData.QUITGAME = false;        // 启动服务播放背景音乐        MusicService.startPlayMusic(MainActivity.this);    }    @Override    public void onWindowFocusChanged(boolean paramBoolean) {        tank2.initPosition();        // tank2.start();    }    @Override    protected void onDestroy() {        super.onDestroy();        GameData.QUITGAME = true;        GameData.getTanks().clear();        MusicService.stopService(this);    }}